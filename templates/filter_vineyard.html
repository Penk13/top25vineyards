{% load static %}

<!-- Filter on Large Screen -->
<div class="d-none d-sm-none d-lg-flex flex-wrap my-1 mx-1 p-0" style="width: 97%;" id="filter-box">
	<p class="fw-bold mx-1 my-auto" style="font-size: 12px;">Filter by:</p>
	<div class="dropdown my-2 mx-1" id="dropdownRating">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownRatingFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">Top Rated<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownRatingFilter" style="width: 300px">
			{% for rating in rating_filters %}
			<li class="ratingItem" id="{{ rating.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="rating" value="{{ rating.id }}" id="ratingInput">
					<label class="form-check-label" for="ratingInput">{{ rating.name }}</label><span class="count-vineyards"> ({{ rating.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="dropdown my-2 mx-1" id="dropdownWorldRegion">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownWorldRegionFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">World<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownWorldRegionFilter" style="width: 300px">
			{% for world_region in world_region_filters %}
			<li class="worldRegionItem" id="{{ world_region.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="world_region" id="worldRegionInput"
						value="{{ world_region.id }}" country="{{ world_region.get_country_id }}" wine_region="{{ world_region.get_wine_region_id }}">
					<label class="form-check-label" for="worldRegionInput">{{ world_region.name }}</label><span class="count-vineyards"> ({{ world_region.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="dropdown my-2 mx-1" id="dropdownCountry">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownCountryFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">Countries<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownCountryFilter" style="width: 300px">
			{% for country in country_filters|dictsort:"name.lower" %}
			<li class="countryItem" id="{{ country.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="country" id="countryInput"
						value="{{ country.id }}" world_region="{{ country.get_world_region_id }}"  wine_region="{{ country.get_wine_region_id }}">
					<label class="form-check-label" for="countryInput">{{ country.name }}</label><span class="count-vineyards"> ({{ country.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="dropdown my-2 mx-1" id="dropdownWineRegion">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownWineRegionFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">Wine Regions<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownWineRegionFilter" style="width: 300px">
			{% for wine_region in wine_region_filters|dictsort:"name.lower" %}
			<li class="wineRegionItem" id="{{ wine_region.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="wine_region" id="wineRegionInput"
						value="{{ wine_region.id }}" world_region="{{ wine_region.get_world_region_id }}" country="{{ wine_region.get_country_id }}">
					<label class="form-check-label" for="wineRegionInput">{{ wine_region.name }}</label><span class="count-vineyards"> ({{ wine_region.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="dropdown my-2 mx-1" id="dropdownWine">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownWineFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">Wines<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownWineFilter" style="width: 300px">
			{% for wine in wine_filters|dictsort:"name.lower" %}
			<li class="wineItem" id="{{ wine.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="wine" value="{{ wine.id }}" id="wineInput">
					<label class="form-check-label" for="wineInput">{{ wine.name }}</label><span class="count-vineyards"> ({{ wine.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="dropdown my-2 mx-1" id="dropdownFacility">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownFacilityFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">Facilities<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownFacilityFilter" style="width: 300px">
			{% for facility in facility_filters|dictsort:"name.lower" %}
			<li class="facilityItem" id="{{ facility.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="facility" value="{{ facility.id }}" id="facilityInput">
					<label class="form-check-label" for="facilityInput">{{ facility.name }}</label><span class="count-vineyards"> ({{ facility.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<div class="dropdown my-2 mx-1" id="dropdownService">
		<button class="btn btn-outline-secondary btn-sm px-2 dropdown-btn" type="button" id="dropdownServiceFilter" data-bs-toggle="dropdown" aria-expanded="false">
			<div class="pe-3">Services<i class="fa-solid fa-sort-down ms-1" style="position: absolute; top: 20%;"></i></div>
		</button>
		<ul class="dropdown-menu scrollable-dropdown" aria-labelledby="dropdownServiceFilter" style="width: 300px">
			{% for service in service_filters|dictsort:"name.lower" %}
			<li class="serviceItem" id="{{ service.id }}">
				<div class="form-check mx-3">
					<input class="form-check-input filter-checkbox" type="checkbox" data-filter="service" value="{{ service.id }}" id="serviceInput">
					<label class="form-check-label" for="serviceInput">{{ service.name }}</label><span class="count-vineyards"> ({{ service.count_vineyards }})</span>
				</div>
			</li>
			{% endfor %}
		</ul>
	</div>
	<i class="fa-solid fa-rotate-left fa-lg my-auto mx-1" style="cursor: pointer;" onclick="resetAllFilters()" data-bs-toggle="tooltip" title="Reset all filters"></i>
</div>

<!-- Filter on Small Screen -->
<div class="d-block d-lg-none my-1 mx-1 p-0" style="width: 97%;">
	<div class="d-flex text-center">
		<h6 
			class="my-3 w-100"
			data-bs-toggle="offcanvas"
			data-bs-target="#offcanvasFilter"
			aria-controls="offcanvasFilter"
			id="filters-mobile"
		>
			<i class="fa-solid fa-sliders mx-2"></i>Filters
		</h6>
	</div>
	<div
		class="offcanvas offcanvas-end bg-light"
		tabindex="-1"
		id="offcanvasFilter"
		aria-labelledby="offcanvasFilterLabel"
		style="width: 75%;"
	>
		<div class="offcanvas-header" style="color: #2a415e;">
			<h5 class="my-0 fw-normal fs-6" style="cursor: pointer;" onclick="resetAllFilters()">Reset</h5>
			<h5 class="my-0 fw-normal fs-6" id="offcanvasFilterLabel">Filters</h5>
			<h5 class="my-0 fw-normal fs-6" data-bs-dismiss="offcanvas" style="cursor: pointer;">Apply</h5>
		</div>
		<hr class="p-0 m-0 text-secondary">
		<div class="p-0 offcanvas-body h-100 d-flex flex-column">
			<div class="my-3" id="dropdownRating" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownRatingFilter" data-bs-toggle="collapse" data-bs-target="#collapseRatingFilter" aria-expanded="false">
					<i class="bi bi-trophy me-3"></i>Top Rated<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseRatingFilter" id="collapseRatingFilter">
					{% for rating in rating_filters %}
					<li class="ratingItem" id="{{ rating.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="rating" value="{{ rating.id }}" id="ratingInput">
							<label class="form-check-label" for="ratingInput">{{ rating.name }}</label><span class="count-vineyards"> ({{ rating.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="my-3" id="dropdownWorldRegion" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownWorldRegionFilter" data-bs-toggle="collapse" data-bs-target="#collapseWorldRegionFilter" aria-expanded="false">
					<i class="bi bi-globe2 me-3"></i>World<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseWorldRegionFilter" id="collapseWorldRegionFilter">
					{% for world_region in world_region_filters %}
					<li class="worldRegionItem" id="{{ world_region.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="world_region" id="worldRegionInput"
								value="{{ world_region.id }}" country="{{ world_region.get_country_id }}" wine_region="{{ world_region.get_wine_region_id }}">
							<label class="form-check-label" for="worldRegionInput">{{ world_region.name }}</label><span class="count-vineyards"> ({{ world_region.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="my-3" id="dropdownCountry" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownCountryFilter" data-bs-toggle="collapse" data-bs-target="#collapseCountryFilter" aria-expanded="false">
					<i class="bi bi-geo-alt me-3"></i>Countries<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseCountryFilter" id="collapseCountryFilter">
					{% for country in country_filters|dictsort:"name.lower" %}
					<li class="countryItem" id="{{ country.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="country" id="countryInput"
								value="{{ country.id }}" world_region="{{ country.get_world_region_id }}"  wine_region="{{ country.get_wine_region_id }}">
							<label class="form-check-label" for="countryInput">{{ country.name }}</label><span class="count-vineyards"> ({{ country.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="my-3" id="dropdownWineRegion" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownWineRegionFilter" data-bs-toggle="collapse" data-bs-target="#collapseWineRegionFilter" aria-expanded="false">
					<i class="bi bi-geo-fill me-3"></i></i>Wine Regions<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseWineRegionFilter" id="collapseWineRegionFilter">
					{% for wine_region in wine_region_filters|dictsort:"name.lower" %}
					<li class="wineRegionItem" id="{{ wine_region.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="wine_region" id="wineRegionInput"
								value="{{ wine_region.id }}" world_region="{{ wine_region.get_world_region_id }}" country="{{ wine_region.get_country_id }}">
							<label class="form-check-label" for="wineRegionInput">{{ wine_region.name }}</label><span class="count-vineyards"> ({{ wine_region.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="my-3" id="dropdownWine" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownWineFilter" data-bs-toggle="collapse" data-bs-target="#collapseWineFilter" aria-expanded="false">
					<i class="bi bi-droplet me-3"></i>Wines<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseWineFilter" id="collapseWineFilter">
					{% for wine in wine_filters|dictsort:"name.lower" %}
					<li class="wineItem" id="{{ wine.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="wine" value="{{ wine.id }}" id="wineInput">
							<label class="form-check-label" for="wineInput">{{ wine.name }}</label><span class="count-vineyards"> ({{ wine.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="my-3" id="dropdownFacility" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownFacilityFilter" data-bs-toggle="collapse" data-bs-target="#collapseFacilityFilter" aria-expanded="false">
					<i class="bi bi-flower2 me-3"></i>Facilities<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseFacilityFilter" id="collapseFacilityFilter">
					{% for facility in facility_filters|dictsort:"name.lower" %}
					<li class="facilityItem" id="{{ facility.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="facility" value="{{ facility.id }}" id="facilityInput">
							<label class="form-check-label" for="facilityInput">{{ facility.name }}</label><span class="count-vineyards"> ({{ facility.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="my-3" id="dropdownService" style="cursor: pointer;">
				<div class="d-flex mx-3 collapse-btn collapsed" id="dropdownServiceFilter" data-bs-toggle="collapse" data-bs-target="#collapseServiceFilter" aria-expanded="false">
					<i class="bi bi-people me-3"></i>Services<i class="fa-solid fa-angle-down ms-auto my-auto"></i>
				</div>
				<ul class="collapse list-group scrollable-dropdown w-100 my-2" aria-labelledby="collapseServiceFilter" id="collapseServiceFilter">
					{% for service in service_filters|dictsort:"name.lower" %}
					<li class="serviceItem" id="{{ service.id }}">
						<div class="form-check mx-3 my-2">
							<input class="form-check-input filter-checkbox border-dark" type="checkbox" data-filter="service" value="{{ service.id }}" id="serviceInput">
							<label class="form-check-label" for="serviceInput">{{ service.name }}</label><span class="count-vineyards"> ({{ service.count_vineyards }})</span>
						</div>
					</li>
					{% endfor %}
				</ul>
			</div>
			<hr class="p-0 m-0 text-secondary">
			<div class="px-3 py-2 text-center text-white" style="cursor: pointer; background-color: #2a415e;" id="view-filtered-vineyards" data-bs-dismiss="offcanvas">View all {{ total_vineyards }} Vineyards</div>
			<div class="row flex-grow-1 overflow-auto m-0" style="background-color: #2a415e;"></div>
		</div>
	</div>
</div>

<!-- Show Selected Filter -->
<div class="selectedFilters">
	
</div>
